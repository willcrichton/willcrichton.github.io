<!DOCTYPE html>
<html>
<head>
<!-- Load the Paper.js library -->
<script type="text/javascript" src="paper-full.js"></script>
<!-- Define inlined PaperScript associate it with myCanvas -->
<script type="text/paperscript" canvas="myCanvas" width = 1000 height = 500>
	// Create a Paper.js Path to draw a line into it:

	var dirVert = 'up';
	var dirHor = 'right';
	var roof = 20;
	var floor = 500;
	var dx = 5;
	var dy = 10;
	var left = 0;
	var right = 1000;
	var radius = 25;

	//making border
    var topleft = new Point(0,0);
    var topright = new Point(right, 0);
    var bottomleft = new Point(0, floor);
    var bottomright = new Point(right, floor);

    var leftborder = new Path.Line(topleft, bottomleft);
    var topborder = new Path.Line(topleft, topright);
    var bottomborder = new Path.Line(bottomleft, bottomright);
    var rightborder = new Path.Line(topright, bottomright);

    leftborder.strokeColor = 'black';
    topborder.strokeColor = 'black';
    bottomborder.strokeColor = 'black';
    rightborder.strokeColor = 'black';

    //making person
	var point = new Point(right/2, floor - 60);
	var size = new Size(60, 60);
	var rectPath = new Path.Rectangle(point, size);
	rectPath.fillColor = 'black';


	//making bouncing ball
	var x =50;
	var y =50;

	var circlePath = new Path.Circle(new Point(x,y), radius);
	circlePath.fillColor = 'red';


	var Ball = new function() {
		return {
			bounce: function() {
				if (dirVert == 'up')
				{
					if(y<floor)
					{
						y+=dy;
					} 
					if(y==floor)
					{
						dirVert = 'down';
						y-=dy
					}
				}
				else
				{
					if(y > roof)
					{
						y-=dy;
					} 
					if(y == roof)
					{
						dirVert = 'up';
						y+=dy
					}
		
				}
				if (dirHor == 'right')
				{
					if(x<right)
					{
						x+=dx;
					}
					else
					{
						x-=dx;
						dirHor = 'left'
					}
				}
				else if (dirHor == 'left')
				{
					if(x>left)
					{
						x-=dx;
					}
					else
					{
						x+=dx;
						dirHor = 'right'
					}
				}
				circlePath.position = new Point(x,y);
				circlePath.fillColor.hue += 1;
			},
			collision: function(bullet) {
					if ((bullet.position.x + 5 <= x + radius) && (bullet.position.x - 5 >= x - radius) && (bullet.position.y + 5 <= y + radius) && (bullet.position.y - 5 >= y - radius))
						{circlePath.remove();}
			}
    };
};
	var Shot = new function() {
		var group = new Group();
		var children = group.children;
		return {
			fire: function (position) {
				var shot = new Path.Circle ({
					center: position,
					radius: 10,
					parent: group,
					fillColor: 'red'
				});
			},
		 	move: function () {
		 		for (var i = 0; i < children.length; i++) {
		 			var bullet = children[i];
		 			bullet.position += new Point (0, -10);
		 			}
		 	    },
		 	check: function (){
		 		for (var i = 0; i < children.length; i++) {
		 			var bullet = children[i];
		 			Ball.collision(bullet);
		 		}
		 	}
		 };
	};
		
	
	function onKeyDown(event){
		if (event.key == 'left') {
			rectPath.position  += new Point(-10,0);
			if (rectPath.position.x < 30) {
				rectPath.position += new Point(10,0);
			}
		}
		if (event.key == 'right') {
			rectPath.position += new Point(10,0);
			if (rectPath.position.x > right-30) {
				rectPath.position += new Point(-10, 0);
			}
		}
		if (event.key == 'up') {
			Shot.fire(rectPath.position);
		}
	}
	function onFrame (event) {
		console.log(rectPath.position);
		Shot.move();
		Shot.check();
		Ball.bounce();
	}
</script>
</head>
<body style ="background:lightblue">
	<canvas id="myCanvas" resize></canvas>
</body>

